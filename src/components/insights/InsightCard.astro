---
// InsightCard component for displaying insight previews
export interface Props {
  insight: {
    slug: string;
    data: {
      title: string;
      description: string;
      publishDate: Date;
      author: string;
      readingTime: string;
      coverImage?: string;
      featured: boolean;
      tags: string[];
    };
  };
  size?: 'small' | 'medium' | 'large';
}

const { insight, size = 'medium' } = Astro.props;

// Format date
const formatDate = (date: Date) => {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};

// Get card classes based on size
const getCardClasses = (size: string) => {
  const baseClasses = "bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group";
  
  switch (size) {
    case 'large':
      return `${baseClasses} md:flex md:flex-row`;
    case 'small':
      return `${baseClasses}`;
    default:
      return `${baseClasses}`;
  }
};

const getImageClasses = (size: string) => {
  switch (size) {
    case 'large':
      return "w-full md:w-1/2 h-64 md:h-auto object-cover";
    case 'small':
      return "w-full h-40 object-cover";
    default:
      return "w-full h-48 object-cover";
  }
};
---

<article class={getCardClasses(size)}>
  <a href={`/insights/${insight.slug}/`} class="block">
    <!-- Cover Image -->
    {insight.data.coverImage && (
      <div class="relative overflow-hidden">
        <img 
          src={insight.data.coverImage} 
          alt={insight.data.title}
          class={getImageClasses(size) + " group-hover:scale-105 transition-transform duration-300"}
        />
        {insight.data.featured && (
          <div class="absolute top-4 left-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium">
            Featured
          </div>
        )}
      </div>
    )}
    
    <!-- Content -->
    <div class={size === 'large' ? 'md:w-1/2 p-6' : 'p-6'}>
      <!-- Tags -->
      {insight.data.tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mb-3">
          {insight.data.tags.slice(0, 3).map(tag => (
            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium">
              {tag}
            </span>
          ))}
        </div>
      )}
      
      <!-- Title -->
      <h3 class={`font-bold text-gray-900 group-hover:text-blue-600 transition-colors mb-3 ${
        size === 'large' ? 'text-2xl' : size === 'small' ? 'text-lg' : 'text-xl'
      }`}>
        {insight.data.title}
      </h3>
      
      <!-- Description -->
      <p class={`text-gray-600 mb-4 ${size === 'small' ? 'text-sm' : ''}`}>
        {insight.data.description}
      </p>
      
      <!-- Meta Info -->
      <div class="flex items-center space-x-4 text-sm text-gray-500">
        <span>{insight.data.author}</span>
        <span>â€¢</span>
        <span>{insight.data.readingTime}</span>
      </div>
    </div>
  </a>
</article>
