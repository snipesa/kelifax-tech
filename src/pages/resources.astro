---
import MainLayout from '../layouts/MainLayout.astro';
import ResourceCard from '../components/ResourceCard.astro';
import resourcesData from '../data/resources.json';

// Get resources from JSON data
const allResources = resourcesData;
const categories = [...new Set(allResources.map(r => r.category))];
const featuredResources = allResources.filter(r => r.featured);
---

<MainLayout title="Browse Resources - Kelifax" description="Discover curated tech resources, tools, and platforms for developers and designers." currentPage="resources">
  <!-- Page Header -->
  <section class="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
          Browse Resources
        </h1>
        <p class="text-xl text-blue-100 mb-8 max-w-2xl mx-auto">
          Explore our curated collection of {allResources.length}+ verified tech resources
        </p>
      </div>
    </div>
  </section>

  <!-- Featured Resources -->
  {featuredResources.length > 0 && (
    <section class="py-12 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Featured Resources</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
          {featuredResources.slice(0, 6).map((resource) => (
            <ResourceCard
              slug={resource.slug}
              title={resource.title}
              description={resource.description}
              category={resource.category}
              tags={resource.tags}
              url={resource.url}
              image={resource.image}
              featured={resource.featured}
            />
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- All Resources -->
  <section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-900">All Resources</h2>
        <span class="text-sm text-gray-600">
          {allResources.length} total resources
        </span>
      </div>

      <!-- Category Filter -->
      <div class="mb-8">
        <div class="flex flex-wrap gap-2">
          <span class="text-sm font-medium text-gray-700 mr-3">Filter by:</span>
          <button class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors">
            All Resources
          </button>
          {categories.map((category) => (
            <button class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors capitalize">
              {category}
            </button>
          ))}
        </div>
      </div>

      <!-- Resources Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {allResources.map((resource) => (
          <ResourceCard
            slug={resource.slug}
            title={resource.title}
            description={resource.description}
            category={resource.category}
            tags={resource.tags}
            url={resource.url}
            image={resource.image}
            featured={resource.featured}
          />
        ))}
      </div>
    </div>
  </section>
</MainLayout>
